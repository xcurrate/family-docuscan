<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Family DocuScan Pro</title>
    
    <link rel="stylesheet" href="style.css">
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/cropperjs/1.5.13/cropper.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/cropperjs/1.5.13/cropper.min.js"></script>
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2/dist/umd/supabase.min.js"></script>
    
    <script src="app.js" defer></script>
</head>
<body>

    <header>
        <div class="header-left">
            <button id="btn-home" class="btn-icon hidden">‚Üê</button>
            <h1>DocuScan Pro</h1>
        </div>
    </header>

    <main>
<div id="home-view" class="view active">
    <div class="home-layout">
        
        <div class="hero-card">
            <h2>DocuScan Pro</h2>
            <p style="color:#a1a1aa; margin-top:5px;">Pemindai Dokumen Web</p>
        </div>

        <div class="action-grid">
            <button id="nav-camera" class="btn-menu-large primary">
                <span style="font-size: 2rem;">üì∏</span>
                <span>Scan Kamera</span>
            </button>
            
            <button id="nav-upload" class="btn-menu-large">
                <span style="font-size: 2rem;">üìÅ</span>
                <span>Upload File</span>
                <input type="file" id="file-input" accept="image/*" hidden> 
            </button>

            <button onclick="alert('Versi: 3.1 Pro')" class="btn-menu-large">
                <span style="font-size: 2rem;">‚ÑπÔ∏è</span>
                <span>Info App</span>
            </button>
        </div>

        <div class="description-section">
            <h3 style="margin-top:0; color:white;">Cara Menggunakan:</h3>
            <ul style="padding-left: 20px; margin-bottom: 0;">
                <li>Klik tombol <b>Scan Kamera</b> untuk memotret dokumen.</li>
                <li>Atau pilih <b>Upload File</b> jika sudah ada foto di galeri.</li>
                <li>Gunakan fitur <b>Crop</b> untuk meluruskan kertas.</li>
                <li>Pilih filter <b>B&W</b> agar tulisan lebih jelas.</li>
                <li>Klik tombol Ungu (Simpan) di halaman Editor untuk menyimpan.</li>
            </ul>
        </div>
        
        <div style="height: 50px;"></div>
    </div>
</div>


<div id="editor-view" class="view">
    <div class="editor-layout">
        <div class="canvas-wrapper">
            <canvas id="canvas"></canvas>
            <img id="image-for-cropper" class="hidden">
            
            <div style="position: absolute; top: 10px; right: 10px; z-index: 10;">
                <button id="btn-start-crop" style="background:rgba(0,0,0,0.6); color:white; border:none; padding:8px 12px; border-radius:20px;">‚úÇÔ∏è Crop</button>
            </div>
            
            <div id="crop-actions" class="hidden" style="position: absolute; bottom: 10px; left:0; width:100%; display:flex; justify-content:center; gap:10px; z-index:10;">
                <button id="btn-apply-crop" style="background:#22c55e; color:white; border:none; padding:10px 20px; border-radius:20px;">‚úÖ OK</button>
                <button id="btn-cancel-crop" style="background:#ef4444; color:white; border:none; padding:10px 20px; border-radius:20px;">‚ùå Batal</button>
            </div>
        </div>

        <div class="controls-panel">
            <div style="display:flex; gap:10px; margin-bottom:15px; overflow-x:auto;">
                <button data-filter="original" class="tab-btn active" style="flex:1; padding:10px; background:#333; color:white; border:none; border-radius:8px;">Asli</button>
                <button data-filter="magic" class="tab-btn" style="flex:1; padding:10px; background:#333; color:white; border:none; border-radius:8px;">Magic</button>
                <button data-filter="bw" class="tab-btn" style="flex:1; padding:10px; background:#333; color:white; border:none; border-radius:8px;">B&W</button>
            </div>

            <div class="input-row">
                <input type="text" id="doc-name" placeholder="Nama Dokumen" required>
            </div>
            <div class="input-row">
                <select id="doc-category">
                    <option value="KTP">KTP</option>
                    <option value="KK">Kartu Keluarga</option>
                    <option value="Lainnya">Lainnya</option>
                </select>
                <select id="compression-level">
                    <option value="0.8">Size: Sedang</option>
                    <option value="0.5">Size: Kecil</option>
                </select>
            </div>

            <div style="display:flex; gap:10px; margin-bottom:10px;">
                <button id="btn-download-jpg" style="flex:1; padding:12px; background:none; border:1px solid #555; color:white; border-radius:8px;">Unduh JPG</button>
                <button id="btn-download-pdf" style="flex:1; padding:12px; background:none; border:1px solid #555; color:white; border-radius:8px;">Unduh PDF</button>
            </div>

            <button id="btn-save-cloud" class="btn-action-primary">‚òÅÔ∏è Simpan ke Database</button>
        </div>
    </div>
</div>


            <div class="canvas-container">
                <canvas id="canvas"></canvas>
                <img id="image-for-cropper" class="hidden">
            </div>
            
            <div class="editor-controls-wrapper">
                 <div class="filter-tabs">
                    <button data-filter="original" class="tab-btn active">Asli</button>
                    <button data-filter="magic" class="tab-btn">Magic ‚ú®</button>
                    <button data-filter="bw" class="tab-btn">Dokumen B&W</button>
                </div>

                <div class="form-section">
                     <div class="input-group">
                        <input type="text" id="doc-name" placeholder="Nama Dokumen (mis: KTP Ayah)" required>
                        <select id="doc-category">
                            <option value="KTP">KTP</option>
                            <option value="KK">Kartu Keluarga</option>
                            <option value="Akta">Akta Kelahiran</option>
                            <option value="Ijazah">Ijazah/Sertifikat</option>
                            <option value="Lainnya" selected>Lainnya</option>
                        </select>
                    </div>

                    <div class="compression-select">
                         <label for="compression-level">Ukuran File:</label>
                        <select id="compression-level">
                            <option value="0.92">Tinggi (Standar)</option>
                            <option value="0.7">Sedang (Lebih Kecil)</option>
                            <option value="0.5">Rendah (Hemat Kuota)</option>
                        </select>
                    </div>

                    <div class="action-buttons-grid">
                        <button id="btn-download-jpg" class="btn-action outline">‚¨áÔ∏è Unduh JPG</button>
                        <button id="btn-download-pdf" class="btn-action outline">üìÑ Unduh PDF</button>
                        <button id="btn-save-cloud" class="btn-action primary full-width">‚òÅÔ∏è Simpan ke Database</button>
                    </div>
                </div>
            </div>
        </div>

        <div id="about-view" class="view content-view">
            <h2>Tentang DocuScan Pro</h2>
            <div class="info-block">
                <h3>Cara Kerja Alat Ini:</h3>
                <ol>
                    <li>**Tangkap:** Menggunakan kamera HP untuk mengambil citra dokumen.</li>
                    <li>**Proses Lokal:** Semua pemrosesan gambar (filter, crop) dilakukan langsung di browser HP Anda (Client-side) agar cepat dan privasi terjaga sebelum diupload.</li>
                    <li>**Filter Cerdas:** <ul>
                            <li>*Magic:* Meningkatkan kontras dan kecerahan untuk kertas buram.</li>
                            <li>*B&W:* Menggunakan teknik 'Thresholding' untuk mengubah gambar menjadi hitam putih murni, menghilangkan bayangan.</li>
                        </ul>
                    </li>
                    <li>**Penyimpanan:** Hasil akhir diamankan di Supabase Cloud Storage.</li>
                </ol>
            </div>
             <p>Versi 3.0 - Modern UI & Advanced Tools</p>
        </div>

    </main>
    
    <div id="loader" class="loader-overlay hidden">
        <div class="spinner"></div>
        <p id="loader-text">Memproses...</p>
    </div>

</body>
</html>
